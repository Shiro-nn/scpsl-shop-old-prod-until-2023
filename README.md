# scpsl-shop-old-prod-until-2023 üåêüõí

[![GitHub stars](https://img.shields.io/github/stars/Shiro-nn/scpsl-shop-old-prod-until-2023?style=social)](https://github.com/Shiro-nn/scpsl-shop-old-prod-until-2023/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/Shiro-nn/scpsl-shop-old-prod-until-2023?style=social)](https://github.com/Shiro-nn/scpsl-shop-old-prod-until-2023/network/members)
[![GitHub issues](https://img.shields.io/github/issues/Shiro-nn/scpsl-shop-old-prod-until-2023)](https://github.com/Shiro-nn/scpsl-shop-old-prod-until-2023/issues)
[![GitHub last commit](https://img.shields.io/github/last-commit/Shiro-nn/scpsl-shop-old-prod-until-2023)](https://github.com/Shiro-nn/scpsl-shop-old-prod-until-2023/commits)
[![License: MIT](https://img.shields.io/github/license/Shiro-nn/scpsl-shop-old-prod-until-2023)](LICENSE)
[![Status: Archived](https://img.shields.io/badge/status-archived-lightgrey.svg)](https://github.com/Shiro-nn/scpsl-shop-old-prod-until-2023)

![Repo Stats](https://github-readme-stats.vercel.app/api/pin/?username=Shiro-nn&repo=scpsl-shop-old-prod-until-2023)

> **scpsl-shop-old-prod-until-2023** ‚Äî —ç—Ç–æ —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è —Å–∞–π—Ç–∞ –º–∞–≥–∞–∑–∏–Ω–∞ –¥–ª—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ SCPSL, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞—á–∞–ª–∞—Å—å –≤ —Ç—Ä–µ—Ç—å–µ–º –∫–≤–∞—Ä—Ç–∞–ª–µ 2020 –≥–æ–¥–∞ (Q3 2020), –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–Ω–æ—Å–∏–ª–∏—Å—å –¥–æ –ø–µ—Ä–≤–æ–≥–æ –∫–≤–∞—Ä—Ç–∞–ª–∞ 2023 –≥–æ–¥–∞ (Q1 2023), –ø–æ—Å–ª–µ —á–µ–≥–æ –ø—Ä–æ–µ–∫—Ç –±—ã–ª –ø–µ—Ä–µ–≤–µ–¥—ë–Ω –≤ –∞—Ä—Ö–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –Ω–∞–±–æ—Ä –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏—Ö —Ä–∞–±–æ—Ç—É –º–∞–≥–∞–∑–∏–Ω–∞, –∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –¥–æ—Å—Ç—É–ø–µ "–∫–∞–∫ –µ—Å—Ç—å" ‚Äî –±–µ–∑ –¥–∞–ª—å–Ω–µ–π—à–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.

---

## üìÇ –°–æ—Å—Ç–∞–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

–ù–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ `diff.txt` —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤–∫–ª—é—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

| –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è       | –Ø–∑—ã–∫/—Å—Ç–µ–∫                                          | –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ                                                                                   |
|------------------|----------------------------------------------------|----------------------------------------------------------------------------------------------------|
| **`HubManager`** | **Node.js** (`express`)                            | –°–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è IP-–∞–¥—Ä–µ—Å–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/–ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ UserID).                     |
| **`HubServers`** | **Node.js** (`express`, `child_process`)           | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —á–µ—Ä–µ–∑ `iptables` –∏ `ipset` –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤ SCPSL (NAT, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è).  |
| **`cdn`**        | **Node.js** (`express`, `multer`, `imagemin`)      | CDN-—Å–µ—Ä–≤–∏—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, GIF), —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π HTTPS –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.   |
| **`scp-socket`** | **Node.js** (`qurre-socket`, `mongoose`)           | WebSocket-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∏–≥—Ä–æ–≤—ã–º–∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –≤ MongoDB.           |
| **`web-socket`** | **Node.js** (`socket.io`, `mongoose`, `ipinfo`)    | WebSocket-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –º–∞–≥–∞–∑–∏–Ω–∞, –≤–∫–ª—é—á–∞—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π.          |

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ, –∏–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π `package.json` –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `cdn.config.js`, `socket.config.js`).

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ª–æ–∫–∞–ª—å–Ω–æ)

### –û–±—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ **Node.js 18+** –∏ **npm**.
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ **MongoDB 6+** –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (`scp-socket`, `web-socket`).
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç–∞–º, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ –∫–æ–¥–µ.

#### HubManager
```bash
git clone https://github.com/Shiro-nn/scpsl-shop-old-prod-until-2023.git
cd scpsl-shop-old-prod-until-2023/HubManager
npm install
node hub.js
```
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É `4536` (–ª–æ–∫–∞–ª—å–Ω–æ –∏ –Ω–∞ `10.66.55.2`).

#### HubServers
```bash
cd ../HubServers
npm install
node init.js  # –∏–ª–∏ init-nat.js –¥–ª—è NAT-–Ω–∞—Å—Ç—Ä–æ–µ–∫
```
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É `5231`. –¢—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `iptables` –∏ `ipset`.

#### cdn
```bash
cd ../cdn
npm install
node cdn.js
```
- HTTP –Ω–∞ `2653` (localhost), HTTPS –Ω–∞ `2521`. –¢—Ä–µ–±—É–µ—Ç—Å—è —Ñ–∞–π–ª `crt.js` —Å SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏.

#### scp-socket
```bash
cd ../scp-socket
npm install
node socket.js
```
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É `2467`. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `config.js` —Å IP –∏ MongoDB URI.

#### web-socket
```bash
cd ../web-socket
npm install
node init.js
```
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É `2345` (localhost). –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `config.js` —Å MongoDB URI.

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è —Ä–∞–±–æ—Ç—ã HTTPS –≤ `web-socket` —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∫–æ–¥ –≤ `socket.init.js` –∏ –¥–æ–±–∞–≤—å—Ç–µ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ `crt.js`.

---

## üß© –ú–∏–Ω–∏-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
graph LR
    subgraph Clients
        A[–ò–≥—Ä–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã]
        B[–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–∞–≥–∞–∑–∏–Ω–∞]
    end
    A -->|WebSocket| C(scp-socket)
    B -->|WebSocket| D(web-socket)
    A -->|HTTP| E(HubManager)
    A -->|HTTP| F(HubServers)
    B -->|HTTPS/HTTP| G(cdn)
    C -->|MongoDB| H[(Database)]
    D -->|MongoDB| H[(Database)]
    D -->|WebSocket| C
```

- **HubManager**: –•—Ä–∞–Ω–∏—Ç –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç IP-–∞–¥—Ä–µ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- **HubServers**: –£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Ç–µ–≤—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –¥–ª—è –∏–≥—Ä–æ–≤—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤.
- **cdn**: –û–±—Å–ª—É–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π.
- **scp-socket**: –°–≤—è–∑—ã–≤–∞–µ—Ç –∏–≥—Ä–æ–≤—ã–µ —Å–µ—Ä–≤–µ—Ä—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ WebSocket.
- **web-socket**: –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å —Å–µ—Ä–≤–µ—Ä–æ–º –∏ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.

---

## üõ†Ô∏è –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Node.js 18+** –∏ `npm` –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.
- **MongoDB 6+** –¥–ª—è `scp-socket` –∏ `web-socket`.
- **PM2** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `cdn` –∏ `scp-socket`).
- –ü—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ `iptables` –∏ `ipset` –¥–ª—è `HubServers` (Linux).
- SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è HTTPS –≤ `cdn` –∏ `web-socket` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).

---

## ü§ù –í–∫–ª–∞–¥

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π **–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω** (Q1 2023), –ø–æ—ç—Ç–æ–º—É Pull Requests –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –æ—à–∏–±–æ–∫ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –î–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è ‚Äî —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ñ–æ—Ä–∫–∏ –∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.

---

## ‚öñÔ∏è –õ–∏—Ü–µ–Ω–∑–∏—è

–ö–æ–¥ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π **MIT**. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ, –Ω–æ –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –≥–∞—Ä–∞–Ω—Ç–∏–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–ª–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.

> –°–ø–∞—Å–∏–±–æ –∑–∞ –∏–Ω—Ç–µ—Ä–µ—Å –∫ –ø—Ä–æ–µ–∫—Ç—É! –ù–∞–¥–µ—é—Å—å, —ç—Ç–æ—Ç –∞—Ä—Ö–∏–≤–Ω—ã–π –∫–æ–¥ –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –∏–ª–∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è –≤ –≤–∞—à–∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞—Ö. ‚ù§Ô∏è
